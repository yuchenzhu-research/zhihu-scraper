# ============================================================
# ğŸ¸ çŸ¥ä¹çˆ¬è™«é…ç½®æ–‡ä»¶
# ============================================================

# çŸ¥ä¹ç›¸å…³é…ç½®
zhihu:
  # Cookie é…ç½®
  cookies:
    file: "cookies.json"
    required: true  # è®¾ä¸º false å¯åœ¨æ— ç™»å½•ä¸‹è¿è¡Œï¼ˆæ¸¸å®¢æ¨¡å¼ï¼‰

  # æµè§ˆå™¨é…ç½®
  browser:
    headless: true           # æ˜¯å¦æ— å¤´æ¨¡å¼è¿è¡Œ
    timeout: 30000           # é¡µé¢åŠ è½½è¶…æ—¶ (ms)
    viewport:
      width: 1920
      height: 1080
    channel: "chrome"        # ä½¿ç”¨ç³»ç»Ÿ Chrome
    args:
      - "--disable-blink-features=AutomationControlled"
      - "--no-sandbox"
      - "--disable-infobars"
      # - "--disable-gpu"  # å¦‚ä¸ç¨³å®šå¯å¯ç”¨

  # åçˆ¬è™«é…ç½®
  anti_detection:
    stealth: true            # æ³¨å…¥ stealth.min.js
    webgl: true              # WebGL å‚æ•°ä¼ªè£…
    navigator: true          # navigator.webdriver ä¼ªè£…

  # ç­¾åç®—æ³•é…ç½®
  signature:
    enabled: false           # ç›®å‰é¡µé¢è®¿é—®ä¸éœ€è¦ï¼ŒAPI è¯·æ±‚éœ€è¦

# çˆ¬è™«é€šç”¨é…ç½®
crawler:
  # é‡è¯•ç­–ç•¥
  retry:
    max_attempts: 3          # æœ€å¤§é‡è¯•æ¬¡æ•°
    base_delay: 1.0          # åŸºç¡€å»¶è¿Ÿ (ç§’)
    max_delay: 30.0          # æœ€å¤§å»¶è¿Ÿ (ç§’)
    exponential_base: 2.0    # æŒ‡æ•°é€€é¿åº•æ•°
    jitter: true             # æ˜¯å¦æ·»åŠ éšæœºæŠ–åŠ¨

  # æ»šåŠ¨åŠ è½½é…ç½®
  scroll:
    timeout: 60000           # æ»šåŠ¨æ€»è¶…æ—¶ (ms)
    pause: 1000              # æ¯æ¬¡æ»šåŠ¨åç­‰å¾… (ms)
    viewport_height: 800     # è§†å£é«˜åº¦ï¼ˆç”¨äºæ¸è¿›åŠ è½½ï¼‰

  # æ™ºèƒ½å»¶è¿Ÿ (æ¨¡æ‹ŸçœŸäººè¡Œä¸º)
  # é‡è¦: ä¸è¦è®¾ç½®å¤ªå¿«ï¼Œé¿å…è§¦å‘åçˆ¬
  humanize:
    enabled: true
    min_delay: 1.0           # æœ€å°è¯·æ±‚é—´éš” (ç§’)ï¼Œå»ºè®® â‰¥1s
    max_delay: 3.0           # æœ€å¤§è¯·æ±‚é—´éš” (ç§’)ï¼Œå»ºè®® â‰¤5s
    scroll_delay: 0.5        # æ»šåŠ¨åç­‰å¾… (ç§’)
    page_load_delay: 2.0     # é¡µé¢åŠ è½½åç­‰å¾… (ç§’)

  # å›¾ç‰‡ä¸‹è½½é…ç½®
  images:
    concurrency: 4           # å¹¶å‘ä¸‹è½½æ•°
    timeout: 30.0            # ä¸‹è½½è¶…æ—¶ (ç§’)
    referer: "https://www.zhihu.com/"

# å¯¼å‡ºé…ç½®
output:
  directory: "data"
  format: "markdown"
  images_subdir: "images"
  folder_format: "[{date}] {title}"  # æ”¯æŒ {date}, {title}, {author}

# æ—¥å¿—é…ç½®
logging:
  level: "INFO"              # DEBUG / INFO / WARNING / ERROR
  format: "console"          # console (ç¾è§‚) / json (ç»“æ„åŒ–)
  file: "logs/scraper.log"   # æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼ˆå¯é€‰ï¼‰
  log_exceptions: true       # æ˜¯å¦è®°å½•å¼‚å¸¸å †æ ˆ