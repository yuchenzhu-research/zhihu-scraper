# 知乎爬虫新模式使用指南

## 模式概览

我们重构了爬取逻辑，现在支持两种主要模式：

### 模式 1: 游客模式 (无 Cookie)
- **触发条件**: `cookies.json` 不存在或无效。
- **功能**:自动抓取前 **3** 个回答（知乎限制）。
- **用途**: 快速测试或不想登录时使用。

### 模式 2: 登录模式 (有 Cookie)
- **触发条件**: `cookies.json` 中包含有效的 `z_c0`。
- **功能**: 解锁全部功能，支持两种子模式。

---

## 详细使用流程

粘贴知乎问题链接 (如 `https://www.zhihu.com/question/580810624`) 后，程序会自动检测 Cookie 状态：

```
⚙️  检测到问题链接: https://www.zhihu.com/question/580810624
   🍪 Cookie 状态: ✅ 已登录 (解锁全部功能)

   [1] 按数量: 抓取前 N 个回答
   [2] 按范围: 指定起止答主/链接 (闭区间)
👉 请输入 (1/2):
```

### 1. 按数量抓取 (Mode 2.1)
输入 `1`，然后输入你想抓取的回答数量 (如 `20`)。
- **行为**: 从第 1 个回答开始，按顺序抓取前 20 个。

### 2. 按范围抓取 (Mode 2.2)
输入 `2`，然后分别输入**起始**和**结束**标识。
- **支持格式**: 答主名字 (如 `FishDreamer`) 或 回答链接 (如 `.../answer/12345`)。
- **行为**: 程序会滚动寻找这两个锚点，并抓取它们之间 (含) 的所有回答。
- **示例**:
  - 起始: `Civ`
  - 结束: `bigpunch`
  - **结果**: 抓取 Civ 到 bigpunch 之间的所有回答。

---

## 注意事项

- **范围查找**: 如果起始/结束答主在非常靠后的位置 (超过 200 个回答)，程序可能会停止滚动以防止死循环。
- **闭区间**: 抓取包含起始和结束得回答。
- **自动交换**: 如果你输入的起始在结束之后，程序会自动交换顺序。

### 3. 常见问题 (Troubleshooting)

**问题**: 抓取只有前 5 个回答，后面加载不出？
**解决**: 
本工具内置了自动修复机制：
1. **自动点击 "显示全部"**: 程序会尝试点击折叠按钮。
2. **自动切换排序**: 如果仍然卡顿，程序会自动尝试切换到 **"按时间排序"** (Sort by Time)。
   - 此时请耐心等待 10-20 秒，通常能成功加载更多内容。
